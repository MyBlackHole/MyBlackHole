# 语言编程范式

## DSL

热门的编程语言概念

*   过程式抽象原语：变量
*   对象式抽象原语：对象
*   函数式抽象原语：函数
*   事件驱动抽象原语：事件
*   DSL抽象原语：业务定制语言


### 封装

封装的特点：

*   信息隐藏
*   代码解耦
*   减少编译依赖
*   面向接口编程
*   OCP的前提

封装的实现方法：

*   模块的数据结构作为内部属性，不对外暴露。数据结构类型定义放在模块c文件中，h头文件只放数据结构类型声明
*   模块对外导出的外部接口参数中如果使用了数据结构，参数形式使用指针，h头文件只放对外导出的外部接口和数据结构类型声明

### linux 设备模型面向对象例如
Linux设备模型是Linux Kernel中抽象编程的最佳范本，它分解抽象设备模型6个最基本的对象（如下），
其他所有对象由这些对象组合派生而来。

*   device：抽象设备
*   device_driver：抽象驱动
*   bus_type：抽象device和driver的关系
*   kobject：抽象设备的公共属性和行为（如层次结构描述、生命周期管理、热插拔、用户态呈现等）
*   kset：抽象设备组的公共行为（如热插拔事件）
*   kobj_type：抽象设备组的公共属性（如用户态呈现）

![[imgs/Pasted image 20240229090459.png]]
![[imgs/Pasted image 20240229090510.png]]


### 函数式编程介绍

函数式编程的基本特征:

*   Immutable data
*   First class function
*   Tail Recursive Opti

函数式编程常用技术:

*   Higher order function
*   map/reduce
*   Closure
*   Recursing
*   Pipline
*   Lazy evaluation

### 一等函数

函数是函数式编程的“一等公民”，
可以在任何位置定义、使用，如变量、函数入参、返回值。
这一点C语言完全可以做到，Kernel中也有不少编程实例，如下面这个示例中crystalhd_get_cmd_proc就是个高阶函数，
它的返回值是一个函数指针。

### 闭包

闭包是高阶函数的一种表现形式，可以理解为函数与其环境数据的结合体。它主要有2个作用：

*   控制流抽象
*   命名空间控制

C语言的主要有如下应用场景：

*   遍历集合
*   管理资源
*   实施策略

### 事件驱动编程介绍
事件驱动编程的优点：

*   代码解耦
*   时间解耦

事件的定义:

*   用户行为
*   中断
*   定时器
*   信号
*   消息
*   。。。

事件驱动编程的实现原则：

*   好莱坞原则
*   依赖倒置原则

事件驱动编程的实现三部曲：

*   事件注册
*   事件处理
*   事件循环（转化、合并、排队、分派等）

事件驱动编程的结构化设计：

*   事件注册：高层、应用模块
*   事件处理：高层、功能模块
*   事件循环：底层、抽象层、核心模块

事件驱动编程的实现技术：

*   回调函数：控制反转
*   抽象接口：依赖注射 
